<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
	<head>
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
		<script>
		
		
			$(document).ready(function() {
				var widthsnake=5;
				
				var food;
				var can = document.getElementById("mycan");
				if (can.width < window.innerWidth) {//can.width = window.innerWidth;
				}
				if (can.height < window.innerHeight) {
					//can.height = window.innerHeight;
				}

				var ctx = can.getContext("2d");
				var height=$("#mycan").height();
				var width=$("#mycan").width();
				ctx.fillStyle="rgb(255,255,255)";
				ctx.fillRect(0,0,width,height);
				ctx.strokeStyle="rgb(0,0,0)";
				ctx.strokeRect(0,0,width,height);
		function create_snake()
		{
		snakeParts=[];
		var length=5;
		for(var i=length-1;i>=0;i--)
		{
		
		snakeParts.push({x:i,y:0});
		}
		
		}
		function create_food()
		{
	
		food={x:Math.round((Math.random()*(600-5)/5)),y:Math.round((Math.random()*(600-5))/5)};
		
		
		}
		
		function init()
		{
		document.getElementById("score").innerHTML=0;
score=0;
		d="right";
		//alert("asd");
		
		create_snake();
		create_food();
		if(typeof game_interval !="undefined") clearInterval(game_interval);
		game_interval=setInterval(print_snake,33);
		
		}
		
		
		
init();		
		
	score=0;
		function print_snake()
		{
		ctx.fillStyle="rgb(0,0,0)";
		ctx.fillRect(0,0,width,height);
		//Head cell
		 var nx=snakeParts[0].x;
		 var ny=snakeParts[0].y;
		
			if(d == "right") nx++;
		else if(d == "left") nx--;
		else if(d == "up") ny--;
		else if(d == "down") ny++;
		//document.write(nx+" "+ny+ " "+food.x+ " "+food.y);
		
		if(Math.abs(nx-food.x)<2 && Math.abs(ny-food.y)<2)
		{
		document.getElementById("score").innerHTML=++score;
		var tail={x:nx,y:ny};
		create_food();
		}
		else
		{
		
		var tail=snakeParts.pop();
		tail.x=nx;
		tail.y=ny;
		}
		snakeParts.unshift(tail);
		if(nx<0 || nx>600/5 || ny<0 || ny >600/5)
		{
		document.getElementById("score").innerHTML="Game Over!!!";
	nx=0;
	ny=0;
		init();
		//alert("game finisheddd");
		return 0;
		}
		//alert(snakeParts.length);
		for(var i=0; i<snakeParts.length;i++)
		{
		var onepart=snakeParts[i];
		create_cells(onepart.x,onepart.y);
		
		}
		
		create_cells(food.x,food.y);
		
		
		
		}
		
		function create_cells(xx,yy)
		{
		ctx.fillStyle="rgb(0,255,255)";
		ctx.fillRect(xx*widthsnake,yy*widthsnake,widthsnake,widthsnake);
		ctx.strokeStyle="rgb(255,255,255)";
		ctx.strokeRect(xx*widthsnake,yy*widthsnake,widthsnake,widthsnake);
		
		
		}
		
		
		$(document).keydown(function(e){
		var keytype=e.which?e.which:e.keyCode;
		if(keytype==37 && d!="right")
		d="left";
		else if(keytype==38 && d!="down")
		d="up";
		else if(keytype==39 && d!="left")
		d="right";
		else if(keytype==40 && d!="up")
		d="down";

		
		})



			
})
	//var imaged=ctx.getImageDate(800,800,400,400);
	
	
		</script>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>HTML</title>
		<meta name="author" content="jayeshkawli" />
		<!-- Date: 2013-10-05 -->
	</head>
	<body>
		<canvas id="mycan" width="600" height="600">

		</canvas><br/>
		Current Score is: <div id="score" style="text-decoration:bold">
		
		<div>
	</body>
</html>

